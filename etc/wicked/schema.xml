<define name="ipv4-address">
  <array element-type="byte" minlen="4" maxlen="4" notation="ipv4addr"/>
</define>
<define name="ipv4-address-prefix" class="dict">
  <address type="ipv4-address"/>
  <prefix type="byte"/>
</define>
<define name="ipv6-address">
  <array element-type="byte" minlen="16" maxlen="16" notation="ipv6addr"/>
</define>
<define name="ipv6-address-prefix" class="dict">
  <address type="ipv6-address"/>
  <prefix type="byte"/>
</define>
<define name="ethernet-address">
  <array element-type="byte" minlen="6" maxlen="6" notation="hwaddr"/>
</define>

<!-- IPv4 address configuration
  -- This is used in the per-interface <static> config as well as the
  -- leases generated by some dynamic address configuration service.
  -->
<define name="ipv4-addrconf" class="dict">
  <!-- statically assigned addresses are addr/prefix, optionally
       accompanied by a peer address (for tunnel setups etc) -->
  <define name="static-address" class="dict">
    <local type="ipv4-address-prefix"/>
    <peer type="ipv4-address"/>
  </define>
  <addresses class="array" element-type="static-address"/>

  <define name="static-route" class="dict">
    <destination type="ipv4-address-prefix"/>
    <mtu type="uint32"/>
    <tos type="byte"/>

    <define name="ipv4-nexthop" class="dict">
      <gateway type="ipv4-address"/>
      <weight type="uint32"/>
      <!-- Other types of routing info could be added here,
        -- eg for blackhole routes etc. -->
    </define>
    <nexthop class="array" element-type="ipv4-nexthop" minlen="1"/>
  </define>
</define>

<define name="interface" class="dict">
 <name type="string"/>
 <link class="dict">
  <class type="string"/>
  <mtu type="uint32"/>
 </link>
 <addrconf class="dict">
  <ipv4 class="dict">
   <enabled type="boolean"/>

   <static type="ipv4-addrconf"/>
  </ipv4>
  <ipv6 class="dict">
   <enabled type="boolean"/>
  </ipv6>
 </addrconf>
</define>
<define name="ethernet" class="dict">
 <address type="ethernet-address"/>
</define>

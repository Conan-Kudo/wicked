<service name="bonding" interface="com.suse.Wicked.Bond" object-class="netif-bond">
 <!-- This is the device-info returned in interface reports -->
 <define name="device-info" class="dict">
   <mode type="builtin-bonding-mode"/>

   <!-- One or more slave elements can occur.
     -- At most one of them may be marked as primary.
     -->
   <define name="slave" class="dict">
     <device type="string"/>
     <primary type="boolean"/>
   </define>
   <slaves class="array" element-type="slave"/>

   <!-- Link monitoring options.
     -- There must be exactly one of either arpmon or miimon present,
     -- which selects either mii or arp monitoring. Lack of both is an
     -- error. If both are present, the behavior is undefined.
     -->
   <arpmon class="dict">
     <interval type="uint32"/>
     <validate type="builtin-bonding-validate"/>
     <target class="array" element-type="ipv4-address" minlen="1"/>
   </arpmon>

   <miimon class="dict">
     <frequency type="uint32"/>
     <validate type="uint32"/>
     <updelay type="uint32"/>
     <downdelay type="uint32"/>

     <define name="carrier-detect" type="string" constraint="oneof">
       <choice value="ioctl"/>
       <choice value="netif"/>
     </define>

     <carrier type="carrier-detect"/>
   </miimon>
 </define>

 <properties type="device-info"/>

 <method name="newDevice">
   <arguments>
    <bond type="bonding:device-info"/>
   </arguments>
 </method>

 <method name="addSlave">
  <arguments>
   <name type="string" />
  </arguments>
 </method>

 <method name="removeSlave">
  <arguments>
   <name type="string" />
  </arguments>
 </method>
</service>

<service name="bonding-factory" interface="com.suse.Wicked.Bond.Factory" object-class="netif-list">
  <method name="newDevice">
    <arguments>
     <name type="string"/>
     <bond type="bonding:device-info"/>
    </arguments>
    <return>
     <string/>
    </return>
  </method>
</service>

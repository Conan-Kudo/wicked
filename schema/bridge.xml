
<service name="bridge" interface="com.suse.Wicked.Bridge" object-class="netif-bridge">

  <define name="port-type" class="dict">
    <!-- There should be really some more flexible way of specifying the device,
      -- so that we have to rely less on udev to get the interface names right
      -->
    <device type="string" />
    <priority type="uint32" constraint="range">
      <min value="0"/>
      <max value="63"/>
    </priority>
    <path-cost type="uint32" />

    <!-- The following fields contain status information only, and should
      -- not appear in configuration files.
      -- These values are ignored when creating a bridge port. -->
    <!-- FIXME: state is really asking for an enum -->
    <state type="uint32" />
    <port-no type="uint32" />
    <port-id type="uint32" />
  </define>

  <!-- This is the linkconfig returned in interface reports -->
  <define name="linkconfig" class="dict">
    <priority type="uint32" />
    <stp type="uint32" constraint="enum">
      <none value="0" />
      <stp value="1" />
      <rstp value="2" />
    </stp>

    <!-- These are floating point values representing seconds -->
    <forward-delay type="double" />
    <aging-time type="double" />
    <hello-time type="double" />
    <max-age type="double" />

    <ports class="array" element-type="port-type" />
  </define>

  <define name="properties" class="dict" extends="linkconfig">
    <!-- add more status information to this -->
  </define>

  <method name="deleteLink">
    <!-- no arguments, no return code -->
  </method>

  <method name="addPort">
    <arguments>
      <port type="port-type"/>
    </arguments>
  </method>

  <method name="removePort">
    <arguments>
      <port type="string"/>
    </arguments>
  </method>
</service>

<service name="bridge-factory" interface="com.suse.Wicked.Bridge.Factory" object-class="netif-list">
  <method name="newDevice">
    <arguments>
     <name type="string"/>
     <bridge type="bridge:linkconfig"/>
    </arguments>
    <return>
     <string/>
    </return>
  </method>
</service>
